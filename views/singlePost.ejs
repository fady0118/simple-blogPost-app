<!DOCTYPE html>
<html lang="en">
<%- include('includes/head') %>

<body>
    <%- include('includes/header') %>
    <main>
         <div>
            <h1>
            <%= post.title %>
        </h1>
        <article>
            <div>
                <%- filterUserHTML(post.body) %>
            </div>
            <small>posted by
                <b>
                    <%= post.username %>
                </b>
                on <i>
                    <%= new Date(post.createdDate).getDate() %>/<%= new Date(post.createdDate).getMonth()+1%>/<%= new Date(post.createdDate).getFullYear() %>
                    -
                    <%= new Date(post.createdDate).getHours() %>:<%= new Date(post.createdDate).getMinutes() %>:<%= new Date(post.createdDate).getSeconds() %>
                </i>
            </small>
            <br/>
            <% if(isAuthor){%>
                <div>
                    <button><a style="text-decoration: none; color: #212121;" href="/updatePost/<%= post.id %>">Edit Post</a></button>
                    <button onclick="showPopup()">Delete Post</button>
                </div>
            <% } %>
            <form class="notice" id="deletePopup" action="/deletePost/<%= post.id %>?_method=DELETE" method="post">
                <p>Are you sure you want to delete this post?</p><br/>
                <button type="submit">yes</button>
                <button type="button" onclick="removePopup()">cancel</button>
            </form>
        </article>
        </div>

    </main>
    <%- include('includes/footer') %>
<script>
    function showPopup(){
        const popup = document.getElementById("deletePopup");
        popup.style.display ='block';
    }
    function removePopup() {
        const popup = document.getElementById("deletePopup");
        popup.style.display ='none';
        // const computedStyles = window.getComputedStyle(popup);
        // console.log(computedStyles.getPropertyValue("display"))
        // computedStyles.getPropertyValue("display") ==='none'?popup.style.display ='block':popup.style.display ='none';
    }
</script>
</body>

</html>